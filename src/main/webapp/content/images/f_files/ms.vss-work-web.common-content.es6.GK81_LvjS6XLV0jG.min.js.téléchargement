"use strict";define("Wit/Common",["require","exports","VSS/Platform/Context","VSS/Platform/FPS","VSS/Platform/Location","react","VSS/Legacy/Legacy","VSS/Platform/Layout","VSS/Core/Observable","VSS/Platform/Trace","VSSUI/Button","VSSUI/Util"],function(e,t,o,n,r,i,s,a,c,l,m,d){var u,I,p,C,T,_,y,S,k,v,h,w,b,g,f,A,E,D,L,W,P,R,M;u=t.Resources={},Object.defineProperty(t,"__esModule",{value:!0}),t.Resources.NewWorkItem="New work item",t.Resources.NewQuery="New query",t.Resources.PinWorkItemType="Pin work item type",t.Resources.UnpinWorkItemType="Unpin work item type",t.ConstantsCustomerInteligence={},Object.defineProperty(t,"__esModule",{value:!0}),t.ConstantsCustomerInteligence.WITCustomerIntelligenceArea="WIT",(t.ConstantsCustomerInteligence.WITCustomerIntelligenceFeature||(t.ConstantsCustomerInteligence.WITCustomerIntelligenceFeature={})).RESULT_FILTER="ResultFilter",function(e){t.CreateMenuProvider={},Object.defineProperty(t,"__esModule",{value:!0});o.Services.add("work-create-menu-provider",{serviceFactory:class extends o.VssService{constructor(){super(...arguments),this.menuItems=[]}_serviceStart(e){super._serviceStart(e);const t=this.pageContext.getService("ITfsPageService").getData();t&&t.project&&this.menuItems.push({groupKey:"app-actions",href:r.routeUrl(this.pageContext,"ms.vss-work-web.query-route",{project:t.project.name,view:"query-edit",action:"new",newQuery:"true"}),iconProps:{iconName:"QueryList"},id:"new-query",onActivate:(e,t)=>n.onClickFPS(this.pageContext,e.href,!0,t,{telemetrySource:"NavCreateMenu"}),rank:100,text:u.NewQuery})}getMenuItems(e){return"ms.vss-tfs-web.vertical-header-create-menu"===e?this.menuItems:null}}})}(),t.Dictionary={},Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratedConstants={},Object.defineProperty(t,"__esModule",{value:!0}),(M=t.GeneratedConstants.CoreField||(t.GeneratedConstants.CoreField={}))[M.Id=-3]="Id",M[M.Rev=8]="Rev",M[M.Title=1]="Title",M[M.Description=52]="Description",M[M.WorkItemType=25]="WorkItemType",M[M.TeamProject=-42]="TeamProject",M[M.State=2]="State",M[M.Reason=22]="Reason",M[M.CreatedBy=33]="CreatedBy",M[M.AssignedTo=24]="AssignedTo",M[M.ChangedBy=9]="ChangedBy",M[M.ChangedDate=-4]="ChangedDate",M[M.CreatedDate=32]="CreatedDate",M[M.RevisedDate=-5]="RevisedDate",M[M.AuthorizedDate=3]="AuthorizedDate",M[M.AuthorizedAs=-1]="AuthorizedAs",M[M.History=54]="History",M[M.AreaPath=-7]="AreaPath",M[M.AreaId=-2]="AreaId",M[M.IterationPath=-105]="IterationPath",M[M.IterationId=-104]="IterationId",M[M.NodeName=-12]="NodeName",M[M.RelatedLinkCount=75]="RelatedLinkCount",M[M.HyperLinkCount=-32]="HyperLinkCount",M[M.AttachedFileCount=-31]="AttachedFileCount",M[M.ExternalLinkCount=-57]="ExternalLinkCount",M[M.CommentCount=-33]="CommentCount",M[M.LinkType=100]="LinkType",M[M.Tags=80]="Tags",M[M.Watermark=7]="Watermark",M[M.BoardColumn=90]="BoardColumn",M[M.BoardColumnDone=91]="BoardColumnDone",M[M.BoardLane=92]="BoardLane",M[M.IsDeleted=-404]="IsDeleted",(R=t.GeneratedConstants.CoreFieldRefNames||(t.GeneratedConstants.CoreFieldRefNames={})).AreaId="System.AreaId",R.AreaPath="System.AreaPath",R.AssignedTo="System.AssignedTo",R.AttachedFileCount="System.AttachedFileCount",R.AuthorizedAs="System.AuthorizedAs",R.BoardColumn="System.BoardColumn",R.BoardColumnDone="System.BoardColumnDone",R.BoardLane="System.BoardLane",R.ChangedBy="System.ChangedBy",R.ChangedDate="System.ChangedDate",R.CreatedBy="System.CreatedBy",R.CreatedDate="System.CreatedDate",R.Description="System.Description",R.CommentCount="System.CommentCount",R.ExternalLinkCount="System.ExternalLinkCount",R.History="System.History",R.HyperLinkCount="System.HyperLinkCount",R.Id="System.Id",R.IterationId="System.IterationId",R.IterationPath="System.IterationPath",R.LinkType="System.Links.LinkType",R.NodeName="System.NodeName",R.Reason="System.Reason",R.RelatedLinkCount="System.RelatedLinkCount",R.Rev="System.Rev",R.RevisedDate="System.RevisedDate",R.State="System.State",R.AuthorizedDate="System.AuthorizedDate",R.TeamProject="System.TeamProject",R.Tags="System.Tags",R.Title="System.Title",R.WorkItemType="System.WorkItemType",R.Watermark="System.Watermark",R.IsDeleted="System.IsDeleted",(P=t.GeneratedConstants.CoreLinkTypeReferenceNames||(t.GeneratedConstants.CoreLinkTypeReferenceNames={})).Related="System.LinkTypes.Related",P.Hierarchy="System.LinkTypes.Hierarchy",P.Dependency="System.LinkTypes.Dependency",P.Duplicate="System.LinkTypes.Duplicate",(W=t.GeneratedConstants.DalFields||(t.GeneratedConstants.DalFields={})).IDId=-3,W.RevId=8,W.TitleId=1,W.DescriptionId=52,W.WorkItemTypeId=25,W.PortfolioProjectId=-42,W.WorkItemFormIDId=-14,W.WorkItemFormId=-15,W.StateId=2,W.ReasonId=22,W.CreatedById=33,W.WatermarkId=7,W.AssignedToId=24,W.LastChangedById=9,W.LastChangedDateId=-4,W.AuthorizedDateId=3,W.CreatedDateId=32,W.RevisedDateId=-5,W.PersonNameId=-1,W.HistoryId=54,W.AreaPathId=-7,W.AreaIDId=-2,W.IterationPathId=-105,W.IterationIDId=-104,W.NodeNameId=-12,W.RelatedLinkCountId=75,W.RemoteLinkCountId=-34,W.LinkedFileCountId=-32,W.AttachedFileCountId=-31,W.CommentCountId=-33,W.BISURICountId=-57,W.Tags=80,W.BoardColumnId=90,W.BoardColumnDoneId=91,W.BoardLaneId=92,W.RelatedLinks=37,W.PersonID=-6,W.LinkedFiles=51,W.BISURI=58,W.AttachedFiles=50,W.HiddenAttachedFiles=49,W.AreaLevel1=-43,W.AreaLevel2=-44,W.AreaLevel3=-45,W.AreaLevel4=-46,W.AreaLevel5=-47,W.AreaLevel6=-48,W.AreaLevel7=-49,W.IterationLevel1=-50,W.IterationLevel2=-51,W.IterationLevel3=-52,W.IterationLevel4=-53,W.IterationLevel5=-54,W.IterationLevel6=-55,W.IterationLevel7=-56,W.IsDeleted=-404,W.ZZZDummyField=-58,(L=t.GeneratedConstants.FavoriteScopes||(t.GeneratedConstants.FavoriteScopes={})).WORK_PLANS="Work.Plans",L.WIT_QUERYITEMS="WorkItemTracking.Queries",L.VC_PATHS="VersionControl.Paths",L.BUILD_DEFINITIONS="Build.Definitions",L.PROJECTS="Classification.TeamProjects",L.TEAMS="Team.Teams",L.REPOSITORIES="VersionControl.Repositories",L.TEST_PLANS="TestManagement.Plans",(D=t.GeneratedConstants.FavoriteTypes||(t.GeneratedConstants.FavoriteTypes={})).WORK_PLAN="Microsoft.TeamFoundation.Work.Plans",D.WORK_ITERATION="Microsoft.TeamFoundation.Work.TeamIterations",D.WORK_TEAMBACKLOG="Microsoft.TeamFoundation.Work.TeamBacklogs",D.WORK_TEAMBOARD="Microsoft.TeamFoundation.Work.TeamBoardSets",D.WIT_QUERYITEM="Microsoft.TeamFoundation.WorkItemTracking.QueryItem",D.VC_PATH="Microsoft.TeamFoundation.VersionControl.Path",D.BUILD_DEFINITION="Microsoft.TeamFoundation.Build.Definition",D.BUILD_DEFINITION_INITIALIZED="Microsoft.TeamFoundation.Build.BuildDefinitionInitialized",D.PROJECT="Microsoft.TeamFoundation.Classification.TeamProject",D.TEAM="Microsoft.TeamFoundation.Teams.Team",D.TFVC_REPOSITORY="Microsoft.TeamFoundation.Tfvc.Repository",D.GIT_REPOSITORY="Microsoft.TeamFoundation.Git.Repository",D.TEST_PLAN="Microsoft.TeamFoundation.TestManagement.Plan",D.DASHBOARD="Microsoft.TeamFoundation.Dashboards.Dashboard",(E=t.GeneratedConstants.FieldType||(t.GeneratedConstants.FieldType={}))[E.Internal=0]="Internal",E[E.String=1]="String",E[E.Integer=2]="Integer",E[E.DateTime=3]="DateTime",E[E.PlainText=5]="PlainText",E[E.Html=7]="Html",E[E.TreePath=8]="TreePath",E[E.History=9]="History",E[E.Double=10]="Double",E[E.Guid=11]="Guid",E[E.Boolean=12]="Boolean",E[E.PicklistInteger=14]="PicklistInteger",E[E.PicklistString=15]="PicklistString",(A=t.GeneratedConstants.FollowsConstants||(t.GeneratedConstants.FollowsConstants={})).ArtifactType="WorkItem",A.UnfollowResult="UnfollowResult",(f=t.GeneratedConstants.FormLayoutType||(t.GeneratedConstants.FormLayoutType={}))[f.Desktop=0]="Desktop",f[f.Mobile=1]="Mobile",(g=t.GeneratedConstants.OobFieldRefNames||(t.GeneratedConstants.OobFieldRefNames={})).BacklogPriority="Microsoft.VSTS.Common.BacklogPriority",g.StackRank="Microsoft.VSTS.Common.StackRank",g.ActivatedBy="Microsoft.VSTS.Common.ActivatedBy",g.ActivatedDate="Microsoft.VSTS.Common.ActivatedDate",g.ClosedBy="Microsoft.VSTS.Common.ClosedBy",g.ClosedDate="Microsoft.VSTS.Common.ClosedDate",g.ResolvedBy="Microsoft.VSTS.Common.ResolvedBy",g.ResolvedDate="Microsoft.VSTS.Common.ResolvedDate",g.StateChangeDate="Microsoft.VSTS.Common.StateChangeDate",(b=t.GeneratedConstants.QueriesConstants||(t.GeneratedConstants.QueriesConstants={})).LastVisitedQueryGroupKey="LAST_VISITED_QUERY_GROUP",b.MyFavoritesGroupKey="MY_FAVORITES_GROUP",b.LastVisitedQueryMruKey="Queries/LastVisited",b.TeamFavoriteGroupsExpandStatesMruKey="Queries/FavoriteGroupExpandStates",(w=t.GeneratedConstants.UnfollowResultStatus||(t.GeneratedConstants.UnfollowResultStatus={}))[w.unfollowFailed=0]="unfollowFailed",w[w.unfollowSuccess=1]="unfollowSuccess",(h=t.GeneratedConstants.WellKnownControlNames||(t.GeneratedConstants.WellKnownControlNames={})).HtmlControl="HtmlFieldControl",h.PlainTextControl="PlainTextControl",h.FreshnessIndicatorControl="FreshnessIndicatorControl",h.FieldControl="FieldControl",h.DateControl="DateTimeControl",h.ClassificationControl="WorkItemClassificationControl",h.WorkItemLogControl="WorkItemLogControl",h.WorkItemHistoryControl="WorkItemHistoryControl",h.WorkItemStateGraphControl="WorkItemStateGraphControl",h.LinksControl="LinksControl",h.AttachmentsControl="AttachmentsControl",h.WebpageControl="WebpageControl",h.LabelControl="LabelControl",h.TagFieldControl="TagFieldControl",h.TestStepsControl="TestStepsControl",h.AssociatedAutomationControl="AssociatedAutomationControl",h.StageControl="StageControl",h.StageBuildControl="StageBuildControl",h.ReleaseBuildControl="ReleaseBuildControl",h.AcceptanceCriteriaControl="AcceptanceCriteriaControl",h.DevelopmentControl="DevelopmentControl",h.WorkItemDiscussionControl="WorkItemDiscussionControl",h.ParameterSetControl="ParameterSetControl",(v=t.GeneratedConstants.WITCommonConstants||(t.GeneratedConstants.WITCommonConstants={})).LinkTypes="LinkTypes",v.WorkItemTypes="WorkItemTypes",v.Nodes="Nodes",v.Fields="Fields",v.AllowedValues="AllowedValues",v.ConstantSets="ConstantSets",v.WorkItemTypeCategories="WorkItemTypeCategories",v.TeamProjects="TeamProjects",v.AdhocQueries="AdhocQueries",(t.GeneratedConstants.WorkItemFeatureStateConstants||(t.GeneratedConstants.WorkItemFeatureStateConstants={})).DataProviderName="ms.vss-work-web.work-item-feature-state-data-provider",(k=t.GeneratedConstants.WorkItemFormContributionProperties||(t.GeneratedConstants.WorkItemFormContributionProperties={})).ShowOnDeletedWorkItem="showOnDeletedWorkItem",k.Height="height",k.Name="name",k.Inputs="inputs",k.InputId="id",k.InputRequired="isRequired",k.InputMode="inputMode",k.InputValidation="validation",k.InputDataType="dataType",k.InputDescription="description",k.InputType="type",k.InputProperties="properties",k.InputType_WorkItemField="WorkItemField",k.FieldType="Field",k.InputProperties_WorkItemFieldTypes="workItemFieldTypes",(S=t.GeneratedConstants.WorkItemFormExtensionsConstants||(t.GeneratedConstants.WorkItemFormExtensionsConstants={})).ContributionDefaultHeight_Group=150,S.ContributionDefaultHeight_Control=75,S.ContributionTarget_Form="ms.vss-work-web.work-item-form",S.ContributionType_Page="ms.vss-work-web.work-item-form-page",S.ContributionType_Group="ms.vss-work-web.work-item-form-group",S.ContributionType_Control="ms.vss-work-web.work-item-form-control",S.ContributionType_Notifications="ms.vss-work-web.work-item-notifications",(y=t.GeneratedConstants.WorkItemLinkConstants||(t.GeneratedConstants.WorkItemLinkConstants={})).RESOURCELINKTYPES=["Hyperlink","ArtifactLink"],y.WORKITEMLINKUSAGE="workItemLink",y.RESOURCELINKUSAGE="resourceLink",y.ATTACHEDLINKTYPE="AttachedFile",y.HYPERLINKLINKTYPE="Hyperlink",y.ARTIFACTLINKTYPE="ArtifactLink",y.EXTERNALLINKTYPE="ExternalLink",y.ATTRIBUTES_USAGE="usage",y.ATTRIBUTES_EDITABLE="editable",y.ATTRIBUTES_ENABLED="enabled",y.ATTRIBUTES_ACYCLIC="acyclic",y.ATTRIBUTES_DIRECTIONAL="directional",y.ATTRIBUTES_SINGLETARGET="singleTarget",y.ATTRIBUTES_TOPOLOGY="topology",y.ATTRIBUTES_ID="id",y.ATTRIBUTES_AUTHORIZEDDATE="authorizedDate",y.ATTRIBUTES_RESOURCECREATEDDATE="resourceCreatedDate",y.ATTRIBUTES_RESOURCEMODIFIEDDATE="resourceModifiedDate",y.ATTRIBUTES_REVISEDDATE="revisedDate",y.ATTRIBUTES_RESOURCESIZE="resourceSize",y.ATTRIBUTES_COMMENT="comment",y.ATTRIBUTES_NAME="name",y.ATTRIBUTES_ISLOCKED="isLocked",(_=t.GeneratedConstants.WorkItemSettingsConstants||(t.GeneratedConstants.WorkItemSettingsConstants={})).DataProviderName="ms.vss-work-web.work-item-settings-data-provider",_.Path="WorkItemTracking/Settings",(T=t.GeneratedConstants.WorkItemTypeIcons||(t.GeneratedConstants.WorkItemTypeIcons={})).WorkItemTypeIconNames=["icon_clipboard","icon_crown","icon_trophy","icon_list","icon_book","icon_sticky_note","icon_insect","icon_traffic_cone","icon_chat_bubble","icon_flame","icon_megaphone","icon_code_review","icon_code_response","icon_review","icon_response","icon_test_plan","icon_test_suite","icon_test_case","icon_test_step","icon_test_parameter","icon_star","icon_ribbon","icon_chart","icon_headphone","icon_key","icon_airplane","icon_car","icon_diamond","icon_asterisk","icon_database_storage","icon_government","icon_gavel","icon_parachute","icon_paint_brush","icon_palette","icon_gear","icon_check_box","icon_gift","icon_test_beaker","icon_broken_lightbulb","icon_clipboard_issue"],T.DefaultWorkItemTypeIconName="icon_clipboard",function(e){t.QueryFavoriteProviderDataService={},Object.defineProperty(t,"__esModule",{value:!0});o.Services.add("query-favorite-provider-data-service",{serviceFactory:class extends o.VssService{getArtifactType(){return"Microsoft.TeamFoundation.WorkItemTracking.QueryItem"}getToolTipOnHover(e){return`${e.artifactScope.name}(${(e.artifactProperties||{}).QueryPath})`}}})}(),t.Servicesindex={},Object.defineProperty(t,"__esModule",{value:!0}),function(e){I=t.ServicesWorkItemServiceOther={},Object.defineProperty(t,"__esModule",{value:!0});t.ServicesWorkItemServiceOther.WorkItemServiceOther=class{openWorkItem(e,t,o){e.getService("IVssLayoutManager").renderCallout(e=>i.createElement(s.LegacyComponent,{modules:["WorkItemTracking/SharedScripts/WorkItemDialogShim"],wrappedType:"WorkItemDialog",workItemId:t,onDismiss:e,options:o}))}createWorkItem(e,t,o,a){if(0===o){const o=e.getService("ITfsPageService").getData();if(o&&o.project){const i=`${r.routeUrl(e,"ms.vss-work-web.work-items-create-route",{project:o.project.name})}/${t}`;n.FastPageSwitch(e,i,!0)}}else e.getService("IVssLayoutManager").renderCallout(e=>i.createElement(s.LegacyComponent,{modules:["WorkItemTracking/SharedScripts/WorkItemDialogShim"],wrappedType:"createNewWorkItemDialog",workItemTypeName:t,onDismiss:e,options:a}))}}}(),function(e){p=t.ServicesWorkItemServiceSocial={},Object.defineProperty(t,"__esModule",{value:!0});t.ServicesWorkItemServiceSocial.WorkItemServiceSocial=class{openWorkItem(e,t,o){e.getService("IVssLayoutManager").renderCallout(e=>i.createElement(a.WrappedComponent,{wrappedType:"work-item-edit-panel",dependencies:["ms.vss-work-web.work-item-view"],wrappedProps:{workItemId:t,onDismiss:e}}))}createWorkItem(e,t,o){e.getService("IVssLayoutManager").renderCallout(e=>i.createElement(a.WrappedComponent,{wrappedType:"work-item-create-panel",dependencies:["ms.vss-work-web.work-item-view"],wrappedProps:{workItemTypeName:t,onDismiss:e}}))}}}(),function(e){t.ServicesWorkItemService={},Object.defineProperty(t,"__esModule",{value:!0});o.Services.add("work-item-service",{serviceFactory:class extends o.VssService{async createWorkItem(e,t,o){(await this._getService()).createWorkItem(this.pageContext,e,t,o)}async openWorkItem(e,t){(await this._getService()).openWorkItem(this.pageContext,e,t)}getWorkItemUrl(e,t){return r.routeUrl(this.pageContext,"ms.vss-work-web.work-item-view-route",{id:e.toString(10),project:t})}async _getService(){return this.pageContext.getService("IVssFeatureService").isFeatureEnabled("ms.vss-work-web.social-work-item-feature")?new p.WorkItemServiceSocial:new I.WorkItemServiceOther}}})}(),function(e){function o(e,t,o){if(void 0===t)return!1;o=o||n;for(var r=0,i=e.length;r<i;r++)if(void 0!==e[r]&&0===o(e[r],t))return!0;return!1}function n(e,t){return e==t?0:e>t?1:-1}function r(e,t){t=t||n,e.sort(t);for(var o=1,r=e.length;o<r;o++)0===t(e[o],e[o-1])&&(e.splice(o--,1),r--);return e}t.UtilitiesArray={},Object.defineProperty(t,"__esModule",{value:!0}),t.UtilitiesArray.subtract=function(e,t,n){var r,i;if(!t||0===t.length)return e;i=[];for(var s=0,a=e.length;s<a;s++)o(t,r=e[s],n)||(i[i.length]=r);return i},t.UtilitiesArray.contains=o,t.UtilitiesArray.defaultComparer=n,t.UtilitiesArray.uniqueSort=r,t.UtilitiesArray.unique=function(e,t){const o=e.slice(0);return r(o,t),o}}(),function(e){t.UtilitiesCore={},Object.defineProperty(t,"__esModule",{value:!0}),t.UtilitiesCore.convertValueToDisplayString=function(e,t){return null!=e?"string"==typeof e?e:e instanceof Date?t?e.toLocaleString(t):e.toLocaleString():"number"==typeof e?t?new Date(e).toLocaleString(t):e.toFixed(2):"boolean"==typeof e?e?"True":"False":e.toString():""}}(),function(e){C=t.WorkItemTypeColorAndIcons={},Object.defineProperty(t,"__esModule",{value:!0});class o{static createColorAndIcon(e,t){return{color:this._transformColor(e),icon:this._transformIcon(t)}}static getDefault(){return{color:o.DEFAULT_WORKITEMTYPE_COLOR,icon:o.DEFAULT_WORKITEMTYPE_BOWTIE_ICON}}static _transformColor(e){return e?`#${e.substr(e.length-6)}`:o.DEFAULT_WORKITEMTYPE_COLOR}static _transformIcon(e){return(e=(e||"").trim().toLowerCase())&&o.ICON_NAME_MAPPINGS[e]?o.ICON_NAME_MAPPINGS[e]:o.DEFAULT_WORKITEMTYPE_BOWTIE_ICON}}o.ICON_NAME_MAPPINGS={icon_crown:"bowtie-symbol-crown",icon_trophy:"bowtie-symbol-trophy",icon_list:"bowtie-symbol-list",icon_book:"bowtie-symbol-book",icon_sticky_note:"bowtie-symbol-stickynote",icon_clipboard:"bowtie-symbol-task",icon_insect:"bowtie-symbol-bug",icon_traffic_cone:"bowtie-symbol-impediment",icon_chat_bubble:"bowtie-symbol-review",icon_flame:"bowtie-symbol-flame",icon_megaphone:"bowtie-symbol-ask",icon_test_plan:"bowtie-test-plan",icon_test_suite:"bowtie-test-suite",icon_test_case:"bowtie-test-case",icon_test_step:"bowtie-test-step",icon_test_parameter:"bowtie-test-parameter",icon_code_review:"bowtie-symbol-review-request",icon_code_response:"bowtie-symbol-review-response",icon_review:"bowtie-symbol-feedback-request",icon_response:"bowtie-symbol-feedback-response",icon_ribbon:"bowtie-symbol-ribbon",icon_chart:"bowtie-symbol-finance",icon_headphone:"bowtie-symbol-headphone",icon_key:"bowtie-symbol-key",icon_airplane:"bowtie-symbol-airplane",icon_car:"bowtie-symbol-car",icon_diamond:"bowtie-symbol-diamond",icon_asterisk:"bowtie-symbol-asterisk",icon_database_storage:"bowtie-symbol-storage-database",icon_government:"bowtie-symbol-government",icon_gavel:"bowtie-symbol-decision",icon_parachute:"bowtie-symbol-parachute",icon_paint_brush:"bowtie-symbol-paint-brush",icon_palette:"bowtie-symbol-color-palette",icon_gear:"bowtie-settings-gear",icon_check_box:"bowtie-status-success-box",icon_gift:"bowtie-package-fill",icon_test_beaker:"bowtie-test-fill",icon_broken_lightbulb:"bowtie-symbol-defect",icon_clipboard_issue:"bowtie-symbol-issue"},o.DEFAULT_UNPARENTED_WORKITEM_COLOR="#A6A6A6",o.DEFAULT_UNPARENTED_WORKITEM_BOWTIE_ICON="bowtie-square",o.DEFAULT_WORKITEMTYPE_COLOR_HEX="009CCC",o.DEFAULT_WORKITEMTYPE_COLOR=`#${o.DEFAULT_WORKITEMTYPE_COLOR_HEX}`,o.DEFAULT_WORKITEMTYPE_ICON="icon_clipboard",o.DEFAULT_WORKITEMTYPE_BOWTIE_ICON=o.ICON_NAME_MAPPINGS[o.DEFAULT_WORKITEMTYPE_ICON],t.WorkItemTypeColorAndIcons.WorkItemTypeColorAndIcons=o}(),function(e){t.WorkItemHeaderActions={},Object.defineProperty(t,"__esModule",{value:!0});o.Services.add("work-item-action-service",{serviceFactory:class extends o.VssService{constructor(){super(...arguments),this._topLevelMenuItems=new c.ObservableArray,this._unpinnedMenuItems=new c.ObservableArray,this._typeMenuItems=[],this._pinnedItems=[],this.renderMenuCell=((e,t,o)=>{switch(e){case 4:return i.createElement("span",{className:d.css(t.pinned&&"bolt-list-cell-content-reveal"),onKeyDown:e=>{e.defaultPrevented||37===e.which&&e.preventDefault()}},i.createElement(m.Button,{ariaLabel:t.pinned?u.UnpinWorkItemType:u.PinWorkItemType,iconProps:{iconName:t.pinned?"Unpin":"Pin"},onClick:e=>{e.defaultPrevented||(this._processPinClick(t,o),e.preventDefault())},subtle:!0}))}})}_serviceStart(e){super._serviceStart(e);const t=e.getService("ITfsPageService"),o=t.getData();let n,r,i;if(o){o.project&&(n=o.project.name);const e=t.getHorizontalNavigationTeamData();e&&(r=e.name)}this.pageContext.getService("IVssContributionService").getDataAsync("ms.vss-work-web.new-workitem-data-provider").then(e=>{if((i=e||{}).hasNewWorkItemPermission&&i.workItemTypes){this._settingsService=this.pageContext.getService("ITfsNavigationSettingsService");let e=this._settingsService.getUserSetting("PinnedWorkAction");if(e||(e=i.defaultMenuItem?[`new-workitem-${i.defaultMenuItem}`]:[]),this._pinnedItems=e,n&&i&&i.workItemTypes){const e=this.pageContext.getService("IVssLocationService");for(let t=0;t<i.workItemTypes.length;t++)this._typeMenuItems.push(this._createMenuItem(n,r,e,i,i.workItemTypes[t]));this._typeMenuItems.sort((e,t)=>e.text&&t.text?e.text.localeCompare(t.text):0);for(const e of this._typeMenuItems)e.pinned?this._topLevelMenuItems.push(e):this._unpinnedMenuItems.push(e)}this._newWorkItem={id:"new-work-item",rank:200,text:u.NewWorkItem,groupKey:"wit-actions",subMenuProps:{id:"new-work-item-unpinned",items:this._unpinnedMenuItems}},this._unpinnedMenuItems.length&&this._topLevelMenuItems.splice(0,0,this._newWorkItem)}})}getMenuItems(e){return"ms.vss-tfs-web.vertical-header-create-menu"===e?this._topLevelMenuItems:null}_createMenuItem(e,t,o,n,r){const i=`new-workitem-${r.replace(" ","-").toLowerCase()}`,s={project:e,parameters:r.toLowerCase()};t&&(s.team=t);const a={groupKey:"wit-actions",href:o.routeUrl("ms.vss-work-web.work-items-create-route",s),id:i,pinned:-1!==this._pinnedItems.indexOf(i),rank:201,renderMenuCell:this.renderMenuCell,text:r};if(n.colorAndIcons){const e=this._getWorkItemTypeColorAndIcon(n,r);e&&(a.iconProps={className:d.css("bowtie-icon",e.icon),style:{color:e.color}})}return a.onActivate=((e,t)=>{if(!t.ctrlKey&&!t.shiftKey)return this.pageContext.getService("IVssContributionService").getService("ms.vss-work-web.work-item-service").then(e=>{if(!e)throw new Error("Cannot create work item creation service");e.createWorkItem(r)},e=>{l.traceException(this.pageContext,"WIT","WorkItemCreationFromNavigation",e)}),t.preventDefault(),!0}),a}_getWorkItemTypeColorAndIcon(e,t){if((t=t.trim().toLowerCase())&&e.colorAndIcons){const o=e.colorAndIcons[t];return o&&o.icon?C.WorkItemTypeColorAndIcons.createColorAndIcon(o.color,o.icon):C.WorkItemTypeColorAndIcons.getDefault()}}_insertMenuItem(e,t){let o=0;for(;o<t.length;o++)if(t.value[o]!==this._newWorkItem&&e.text.localeCompare(t.value[o].text)<0){t.splice(o,0,e);break}o===t.length&&t.push(e)}_processPinClick(e,t){const o=e.id;e.pinned?(this._topLevelMenuItems.splice(this._topLevelMenuItems.value.indexOf(e),1),this._insertMenuItem(e,this._unpinnedMenuItems),this._pinnedItems.splice(this._pinnedItems.indexOf(o),1),1===this._unpinnedMenuItems.length&&this._topLevelMenuItems.splice(0,0,this._newWorkItem),t.menu.focus()):(this._unpinnedMenuItems.splice(this._unpinnedMenuItems.value.indexOf(e),1),this._insertMenuItem(e,this._topLevelMenuItems),this._pinnedItems.push(o),0===this._unpinnedMenuItems.length?(t.menu.getParent().focus(),this._topLevelMenuItems.splice(this._topLevelMenuItems.value.indexOf(this._newWorkItem),1)):t.menu.focus()),this._settingsService.setUserSetting("PinnedWorkAction",this._pinnedItems),e.pinned=!e.pinned}}})}()},["Resources","Constants/CustomerInteligence","CreateMenuProvider","Dictionary","Generated/Constants","QueryFavoriteProviderDataService","Services/index","Services/WorkItemService.Other","Services/WorkItemService.Social","Services/WorkItemService","Utilities/Array","Utilities/Core","WorkItemTypeColorAndIcons","WorkItemHeaderActions"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-work-web.common-content"}}));